---
namespace-identifier: eip155-caip25
title: EIP155 Namespace, aka EVM Chains - JSON-RPC Provider Authorization
author: Pedro Gomes (@pedrouid), Hassan Malik (@hmalik88), bumblefudge (@bumblefudge), Derek Rein (@arein), Kristof Gazso (@kristofgazso)
discussions-to: 
status: Draft
type: Standard
created: 2024-02-05
updated: 2024-02-05
requires: ["CAIP-25", "CAIP-211", "CAIP-217"]
---

# CAIP-25

_For context, see the [CAIP-25][] specification._

## Rationale

In the Ethereum space, many networks interact in a given application or session, and as such it is necessary for applications and user-agents like wallets to negotiation and authorize interfaces dynamically and mutually.
The [CAIP-25] negotiation allows for multiple [CAIP-217] authorization scopes to be negotiated together. 

## Network-specific versus Namespace-wide Scopes

Authorizing permissions and capabilities to each network separately (i.e., in its own [CAIP-217] authorization object) is recommended in most use-cases, so that over the session and across sessions, each network can granularly gain or attenuate permissions and capabilities separately. 
Conversely, an authorization object scoped to all of `eip155` can only add or substract individual networks from the `chains` array, or add and substract capabilities to all enumerated networks in that array.

It is also worth mentioning that if a network supports any capabilities NOT supported by other networks, they should never share an authorization object, as the semantics of [CAIP-217] interpret this as supporting EVERY capability listed on EVERY network listed.

In such cases, not only is a separate authorization object recommended, but an explicit [CAIP-211] declaration of the RPC authority where these network-specific capabilities are specified is also recommended;
see the [eip155/caip211.md](./caip211.md) profile for further guidance on using `method` and `notification` definitions not universal to the eip155 namespace.

## Session Properties

When crafting such properties for contextual/in-network usage, it is recommended to align one's semantics and syntax (including case-sensitive style guides for property names!) with the [EIP-6963] wallet provider interface for common properties across architectures.

### Smart Contract Wallet Capability Declaration

When exposing to a caller an on-chain account that it controls, a wallet MAY opt to signal in-band some subset of the capabilities of each on-chain account it controls.

For these cases, it is recommended that wallets pass all this account context in the form of an account object in the `accounts` array of `sessionProperties`, keyed to the address of the account (expressed in [CAIP-10] form) and with the following properties:
* `erc165` (required), array of strings representing in ASCII the [ERC-165] "magic values" generated by hashing the ABI interface descriptions of on-chain interfaces the account supports, each of which MAY also be expressed as an:
* `abiObject` (optional) - an ABI JSON Schema for supported functions

Information specific to one or more supported signature types can be provided in objects keyed to the name of the relevant EIP, such as `EIP-1271` (classic smart contract signature), `EIP-3074` (AUTHCALL *invocation*), `ERC-4337` etc. As all members of each object are optional, empty objects are valid for minimal signaling.

`ERC-1271`

`EIP-3074`
* `authorized` (optional) - the EOA account authorizing a 3074 smart account.

`ERC-4337`
* `bundler` (optional) - string - API endpoint of bundler (providing it implies the bundler will accept a dapp-formed userOp with appropriate authorization, and that wallet may authorize a dapp appropriately)
* `userOpTemplate` (optional) - JSON Schema - these may vary by bundler
* `paymasters` (optional) - array of strings - addresses of zero or more paymasters that will sponsor transactions for this wallet
* `openToPaymaster` *(optional) - boolean - bundler MAY allow alternate paymaster
* `gasEstimationDummySignature` (optional) - string - if present, this value MAY be used to query the provided paymaster(s) on-chain for real-time validation that the gas cost of a given valid `userOp` would be accepted by that paymaster (see section on [`eth_estimateuseroperationgas`](https://eips.ethereum.org/EIPS/eip-4337#-eth_estimateuseroperationgas) of [Erc-4337]) rather than using `eth_call`-style state overrides or other methods; wallets should only pass this in cases where any possible app-sent transaction will support this simulation/gas-estimation method, all provided paymasters will support it, etc.

Exposing such information can be considered a step towards fingerprinting the user agent, so full disclosure of this information on initial connection to any caller is not advised; progressive enrichment patterns or reputational gating are advised to only de-abstract on-chain accounts to minimally trusted counterparties.

#### Example

```
{
  "id": 1,
  "jsonrpc": "2.0",
  "result": {
    "sessionId": "0xdeadbeef",
    "sessionScopes": {
      "eip155": {
        "chains": ["eip155:1", "eip155:137"],
        "methods": ["eth_sendTransaction", "eth_signTransaction", "get_balance", "eth_sign", "personal_sign"]
        "notifications": ["accountsChanged", "chainChanged"],
        "accounts": ["eip155:1:0xab16a96d359ec26a11e2c2b3d8f8b8942d5bfcdb", "eip155:137:0xab16a96d359ec26a11e2c2b3d8f8b8942d5bfcdb"]
      },
      "eip155:10": {
        "methods": ["get_balance"],
        "notifications": ["accountsChanged", "chainChanged"],
        "accounts:" []
      },
      "eip155:42161": {
        "methods": ["personal_sign"],
        "notifications": ["accountsChanged", "chainChanged", "eth_sendUserOperation"],
        "accounts":["eip155:42161:0x0910e12C68d02B561a34569E1367c9AAb42bd810"]
      }
      sessionProperties: {
        "accounts": {
            "eip155:42161:0x0910e12C68d02B561a34569E1367c9AAb42bd810": [
                "bundler": "https://api.pimlico.io/v1/arbitrum/rpc?apikey=1234",
                "erc165": {"0xb61d27f6", "0x4efe356b"},
                "execute": {
                  "inputs": [
                    {
                      "internalType": "address",
                      "name": "dest",
                      "type": "address"
                    },
                    {
                      "internalType": "uint256",
                      "name": "value",
                      "type": "uint256"
                    },
                    {
                      "internalType": "bytes",
                      "name": "func",
                      "type": "bytes"
                    }
                  ],
                  "name": "execute",
                  "outputs": [],
                  "stateMutability": "nonpayable",
                  "type": "function"
                },
                "executeBatch": {
                  "inputs": [
                    {
                      "internalType": "address[]",
                      "name": "dest",
                      "type": "address[]"
                    },
                    {
                      "internalType": "uint256[]",
                      "name": "value",
                      "type": "uint256[]"
                    },
                    {
                      "internalType": "bytes[]",
                      "name": "func",
                      "type": "bytes[]"
                    }
                  ],
                  "name": "executeBatch",
                  "outputs": [],
                  "stateMutability": "nonpayable",
                  "type": "function"
                },
                "paymasters":{},
                "openToPaymaster":true,
                "dummySignature": "0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c"
                  }
                }
            ]
        }        
      },
      ...
    }
  }
}
```

## References

- [EIP155][]: Ethereum Improvement Proposal specifying generation and validation of ChainIDs
- [ERC165]: Ethereum Request for Comment proposing a standard interface for declaring and querying interfaces of a smart contract by "magic values," a compact hash of the syntax declaration of each interface

[execution API]: https://github.com/ethereum/execution-apis?tab=readme-ov-file#execution-api-specification
[CAIP-2]: https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-2.md
[CAIP-10]: https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-10.md
[CAIP-19]: https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-19.md
[CAIP-25]: https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-25.md
[CAIP-211]: https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-211.md
[CAIP-217]: https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-217.md
[EIP]: https://eips.ethereum.org/EIPS/eip-1
[EIP155]: https://eips.ethereum.org/EIPS/eip-155
[ERC165]: https://eips.ethereum.org/EIPS/eip-165
[EIP4337]: https://eips.ethereum.org/EIPS/eip-4337

## Rights

Copyright and related rights waived via CC0.
